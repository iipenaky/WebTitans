<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Orders and Reservations</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/style.css" />
    <script defer type="module" src="./script/customer.js"></script>
    <style>
      body {
        display: flex;
        flex-direction: column;
        min-height: 100%;
        background-image: url("2.jpeg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }

      .dialogue {
        flex: 1;
        width: 60%;
        height: auto;
        background-color: rgba(0, 0, 0, 0.85);
        color: white;
        margin: 10% auto;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 2rem;
        border-radius: 8px;
      }

      .order {
        border: 1px solid #444;
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <header class="bg-black p-4 fixed top-0 w-full z-10">
      <div class="container mx-auto flex justify-between items-center">
        <img
          src="./assets/Untitled design.png"
          alt="Logo"
          class="logo w-50 h-50"
        />
        <nav>
          <ul class="flex space-x-6 text-white">
            <li>
              <a
                href="menu.html"
                class="font-bold hover:text-red-600 transition duration-300"
                >Menu</a
              >
            </li>
            <li>
              <a
                href="reservations.html"
                class="font-bold hover:text-red-600 transition duration-300"
              >
                Make Reservation
              </a>
            </li>
            <li>
              <a
                href="orders.html"
                class="font-bold hover:text-red-600 transition duration-300"
              >
                Orders/Reservations
              </a>
            </li>
            <li>
              <a
                id="logout"
                href="#0"
                class="font-bold hover:text-red-600 transition duration-300"
              >
                Log out
              </a>
            </li>
            <!--Profile Picture-->
            <div class="nav-center">
              <a href="user_dashboard.html"
                ><img src="assets/cookies.jpeg"
              /></a>
            </div>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container mx-auto mt-8">
      <div class="dialogue">
        <h1 class="text-3xl font-bold mb-4 text-center">
          My Reservations and Orders
        </h1>
        <div id="ordersContainer"></div>
        <div id="message" class="text-red-600 text-center mt-4"></div>
        <a
          href="reservations.html"
          class="bg-black text-white px-6 py-3 rounded hover:bg-white hover:text-black transition duration-300"
          >Make Reservations</a
        >
      </div>
    </main>

    <footer class="bg-black text-white py-4 text-center text-sm">
      <p>
        <a href="mailto:info@darrylrestaurant.com" class="text-gray-400"
          >info@darrylsrestaurant.com</a
        >
      </p>
      <p>Location: 123 Food Street, Madina City</p>
    </footer>

    <script>
      const orders = [
        {
          id: 1,
          date: "2024-10-20",
          time: "19:00",
          name: "Table for 2",
          status: "Reserved",
        },
        {
          id: 2,
          date: "2024-10-21",
          time: "20:00",
          name: "Order #101",
          status: "Ready for Pickup",
        },
        {
          id: 3,
          date: "2024-10-22",
          time: "18:30",
          name: "Order #102",
          status: "Ready for Pickup",
        },
      ];

      const ordersContainer = document.getElementById("ordersContainer");
      const messageDiv = document.getElementById("message");

      function renderOrders() {
        ordersContainer.innerHTML = "";

        if (orders.length === 0) {
          ordersContainer.innerHTML =
            '<p class="text-center text-gray-400">No reservations or orders found.</p>';
          return;
        }

        orders.forEach((order) => {
          const orderDiv = document.createElement("div");
          orderDiv.classList.add("order");
          orderDiv.innerHTML = `
                    <h2 class="text-xl font-bold">${order.name}</h2>
                    <p>Date: ${order.date}</p>
                    <p>Time: ${order.time}</p>
                    <p>Status: ${order.status}</p>
                    <button class="bg-red-600 text-white px-4 py-1 rounded mt-2" onclick="confirmCancelOrder(${order.id})">Cancel</button>
                `;
          ordersContainer.appendChild(orderDiv);
        });
      }

      function confirmCancelOrder(orderId) {
        const confirmation = confirm(
          "Are you sure you want to cancel this order?",
        );
        if (confirmation) {
          cancelOrder(orderId);
        }
      }

      function cancelOrder(orderId) {
        const orderIndex = orders.findIndex((order) => order.id === orderId);
        if (orderIndex > -1) {
          orders.splice(orderIndex, 1);
          messageDiv.innerText = "Order cancelled successfully.";
          renderOrders();
        }
      }

      renderOrders();
    </script>
  </body>
</html>
